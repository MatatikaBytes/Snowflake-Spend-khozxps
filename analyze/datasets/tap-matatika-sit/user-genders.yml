# This file is managed by the 'analyze-sit' file bundle and updated automatically when `meltano upgrade` is run.
# To prevent any manual changes from being overwritten, remove the file bundle from `meltano.yml` or disable automatic updates:
#     meltano config --plugin-type=files analyze-sit set _update analyze/datasets/tap-matatika-sit/user-genders.yml false

version: datasets/v0.2
title: User Genders
metadata: |-
  {
    "name": "gitflixusers",
    "label": "GitFlixUsers",
    "related_table": {
      "columns": [],
      "aggregates": [
        {
          "label": "Male",
          "name": "gender_male"
        },
        {
          "label": "Female",
          "name": "gender_female"
        }
      ]
    }
  }
visualisation: |-
  {
    "chartjs-chart": {
      "chartType": "bar",
        "options": {
          "scales": {
            "yAxes": [
              {
                "ticks": {
                  "beginAtZero": true,
                  "stepSize": 1
                }
              }
            ]
          }
        }
    }
  }
query: |-
  SELECT
    COUNT(CASE WHEN gender = 'male' THEN 1 END) "gitflixusers.gender_male",
    COUNT(CASE WHEN gender = 'female' THEN 1 END) "gitflixusers.gender_female"
  FROM gitflixusers
